(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{521:function(e,t,n){e.exports=n(536)},525:function(e,t,n){},532:function(e,t,n){},536:function(e,t,n){"use strict";n.r(t);var a=n(16),r=n.n(a),o=n(396),c=n.n(o),i=(n(525),n(477)),s=n(478),l=n(483),u=n(479),m=n(302),d=n(397),p=n(93),f=n(115),h=n(128),b=n.n(h),g=n(177),w=n(58),v=n(5),y=n(291),E=5e-5;function O(e){var t=Object(a.useState)(),n=Object(f.a)(t,2),o=n[0],c=n[1],i=e.params,s=new w.Vector3(0,0,0),l=e.type;Object(p.f)(Object(g.a)(b.a.mark(function e(){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c(document.getElementById("Orbit").checked);case 1:case"end":return e.stop()}},e)})));for(var u=void 0===l?(new w.Vector3).copyFrom(s):(new w.Vector3).copyFrom(i),m=void 0===l?(new w.Vector3).copyFrom(i):(new w.Vector3).copyFrom(s),d=[],h=w.Vector3.Distance(m,u),y=0;y<65;y++)d.push(Math.PI*(2/65*y));for(var E=[],O=0;O<d.length;O++)E.push(new w.Vector3(h*Math.cos(d[O]),0,h*Math.sin(d[O])));return E.push(E[0]),r.a.createElement("lines",{alpha:.2,setEnabled:o,isPickable:!1,name:"orbit",points:E,color:void 0===l?new v.a(0,1,0):new v.a(1,0,0),onCreated:function(e){e.lookAt(void 0===l?m:u)}})}function j(e){var t=(new w.Vector3).fromArray(e.system[1].center.map(function(e){return e*E})),n=(new w.Vector3(13771471*E,7364470.4372*E,-128971*E),t.subtract(e.position)),o=(new w.Vector3(0,0,0),Object(p.g)()),c=Object(a.useState)(),i=Object(f.a)(c,2),s=i[0],l=i[1];Object(p.f)(Object(g.a)(b.a.mark(function e(){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l(document.getElementById("pipe").checked);case 1:case"end":return e.stop()}},e)})));var u=Object(a.useRef)(null),m=function(){return new Promise(function(t){if(null!==u.current&&o){u.current.parent._children[0]._children.find(function(e){return e.name.includes("Trigger")});var a,r=n,c=(new w.Vector3).copyFrom(e.position),i=new y.Ray(c,r,1e12);a=[c,o.pickWithRay(i,function(e){return"SafeZone Trigger"===e.name}).pickedPoint];var s=1e6*E;if(a.length>0&&null!==u.current){var l=new y.MeshBuilder.CreateTube(e.info.name[0]+" pipe",{path:a,radius:s,sideOrientation:y.Mesh.DOUBLESIDE},o),m=new y.StandardMaterial(e.info.name[0]+"pipe mat",o);m.diffuseColor=new v.a(1,1,0),m.specularColor=new v.a(0,0,0),m.alpha=.14,l.material=m,l.parent=u.current,t({state:!0,val:"ok"})}}})},d=Object(a.useState)(!1),h=Object(f.a)(d,2),O=h[0],j=h[1];function k(e){return!O&&m().then(function(e){j(e.state)}),null}return r.a.createElement("transformNode",{setEnabled:s,ref:u,name:e.info.name[0]+" pipe"},r.a.createElement(k,{debug:!0}))}var k=n(474),C=n(395),x=r.a.createContext({id:2,change:function(e,t){x._currentValue.id=e}}),S=5e-5;function I(e,t,n){(0,n.change)(e.id),void 0!==t.cameras[0].target.name&&t.meshes.forEach(function(e){e.name===t.cameras[0].target.name&&(e.isPickable=!0)}),t.cameras[0].target=e,t.cameras[0].target.name=e.name,e.isPickable=!1}function V(e){var t=e.params,n=function(){return!!(t&&void 0!==t.satellites&&t.satellites.length>0)&&t.satellites.map(function(n){return r.a.createElement(M,{key:n,system:e.system,id:n,parent:t,positionParent:(new w.Vector3).fromArray(t.center.map(function(e){return e*S}))})})};return r.a.createElement(p.d,{name:t.name[0],segments:12,diameter:2*t.radius*S,position:(new w.Vector3).fromArray(t.center.map(function(e){return e*S})),bodytype:t.type[0],infoData:t,systemId:t.systemId,id:t.id,satellites:t.satellites,isPickable:!1},r.a.createElement("standardMaterial",{name:t.name[0]+"mat",diffuseColor:new v.a(0,1,0),specularColor:new v.a(0,0,0)}),r.a.createElement(n,null),r.a.createElement(N,{parent:t}))}function M(e){var t=e.system.find(function(t){return t.id===e.id}),n=e.positionParent,a=(new w.Vector3).fromArray(t.center.map(function(e){return e*S})),o=new w.Vector3(0,0,0).add(a.subtract(n));return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.d,{name:t.name[0],segments:12,diameter:2*t.radius*S,position:o,bodytype:t.type[0],infoData:t,systemId:t.systemId,id:t.id},r.a.createElement("standardMaterial",{name:t.name[0]+"mat",diffuseColor:new v.a(1,0,0),specularColor:new v.a(0,0,0)}),r.a.createElement(N,{parent:t,moon:!0})),r.a.createElement(O,{params:o,system:e.system}))}function N(e){var t=Object(a.useRef)(),n=e.parent,o=r.a.useContext(x);return Object(p.f)(function(e){}),r.a.createElement(p.d,{ref:t,name:(e.moon,n.name[0]+":Trigger"),segments:12,diameter:2*(n.radius+(e.moon?1e4:5e5))*S,position:new w.Vector3(0,0,0),infoData:n,systemId:n.systemId,id:n.id,onCreated:function(e){e.actionManager=new w.ActionManager(e.getScene());var t=e.getScene();!function(e,t,n,a){var r=!1,o=n.name[0],c=n.type[0],i=(new w.Vector3).fromArray(n.center.map(function(e){return e*S}));if(!r){var s=k.a.CreateFullscreenUI("GUI ".concat(o));s.useInvalidateRectOptimization=!1;var l=t.activeCamera.position.clone().subtract(i.clone()).length().toFixed(2),u=new C.u;u.width=.5,u.height="40px",u.color="white",u.thickness=0,s.addControl(u),u.distance=l;var m=C.b.CreateSimpleButton("button");m.textBlock.text=o+" "+u.distance,m.top="0px",m.left="0px",m.width=.5,m.height="40px",m.thickness=0,m.cornerRadius=2,m.children[0].color="#DFF9FB",m.children[0].fontSize=18,m.color="#FF7979",m.hoverCursor="pointer",u.addControl(m),u.linkWithMesh(e),u.linkOffsetY=-50,u.onBeforeDrawObservable.add(function(){u.distance=t.activeCamera.position.clone().subtract(i.clone()).length().toFixed(2),"Moon"!==c?m.textBlock.text=o:"Moon"===c&&u.distance>400?(m.textBlock.text="",u.linkOffsetY=0):"Moon"===c&&u.distance<400&&(m.textBlock.text=o,u.linkOffsetY=50)}),m.onPointerClickObservable.add(function(n){""!==m.textBlock.text&&(I(e,t,a),console.log(m.textBlock.text,u.distance))}),r=!0}}(e,t,n,o),e.actionManager.registerAction(new w.ExecuteCodeAction(w.ActionManager.OnPickTrigger,function(e){I(e.meshUnderPointer,t,o)}))},father:n.name[0]},r.a.createElement("standardMaterial",{name:(e.moon,n.name[0]+":Trigger mat"),alpha:"0.2",diffuseColor:new v.a(0,0,1),specularColor:new v.a(0,0,0)}))}function P(e){return Object.values(e.data).map(function(t){return"Planet"===t.type[0]?r.a.createElement(p.e,{name:t.name[0]+" node",key:t.id},r.a.createElement(V,{params:t,system:Object.values(e.data)}),r.a.createElement(O,{type:"planet",params:(new w.Vector3).fromArray(t.center.map(function(e){return e*S})),system:t}),t.isInSafeZone?null:r.a.createElement(j,{info:t,system:Object.values(e.data),position:(new w.Vector3).fromArray(t.center.map(function(e){return e*S}))})):null})}function B(){return D.apply(this,arguments)}function D(){return(D=Object(g.a)(b.a.mark(function e(){var t;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./data/helios.json").then(function(e){return e.json()}).catch(function(e){return console.log(e)});case 2:return t=e.sent,e.abrupt("return",t[0]);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function F(e){return B().then(function(t){return Object.values(t).find(function(t){return t.id===parseInt(e)})})}var T=5e-5;function A(e,t){return new w.Vector3(e.x*t,e.y*t,e.z*t)}function R(e,t){return z.apply(this,arguments)}function z(){return(z=Object(g.a)(b.a.mark(function e(t,n){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t).then(function(e){return A(e.coordonne,n)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function L(e){var t=e.replace("::pos{","").replace("}","").split(",");return t.length<5?{error:!0}:{error:!1,systemID:parseInt(t[0]),planetID:parseInt(t[1]),lat:parseFloat(t[2]),long:parseFloat(t[3]),height:parseFloat(t[4])}}function W(e){return H.apply(this,arguments)}function H(){return(H=Object(g.a)(b.a.mark(function e(t){var n,a,r,o,c,i;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Math.PI/180,"string"!==typeof t||!t.includes("::pos")){e.next=14;break}if((a=L(t)).error||0===a.planetID){e.next=7;break}return e.abrupt("return",F(a.planetID).then(function(e){var t=e.radius,r=e.center,o=a.height,c=a.lat*n,i=a.long*n,s=o+t,l=r[0]+s*Math.cos(c)*Math.cos(i),u=r[1]+s*Math.cos(c)*Math.sin(i),m=r[2]+s*Math.sin(c);return{error:"false",message:"Les coordonner ce trouve sur "+e.name[0],coordonne:new w.Vector3(l,u,m)}}));case 7:if(a.error||0!==a.planetID){e.next=12;break}return r=new Promise(function(e,t){e({error:"false",message:"les coordonner sont dans l'espace",coordonne:new w.Vector3(a.long,a.lat,a.height)})}),e.abrupt("return",r);case 12:return o=new Promise(function(e,t){e({error:"true",message:"les coordonner ne sont pas bien formater"})}),e.abrupt("return",o);case 14:if(!("object"===typeof t&&t.length>0)){e.next=19;break}return c=new Promise(function(e,n){e({error:"false",message:"Les coordonner peuvent ne pas correspondre",coordonne:new w.Vector3(t[0],t[1],t[2])})}),e.abrupt("return",c);case 19:return i=new Promise(function(e,t){e({error:"true",message:"les coordonner ne sont pas correcte",coordonne:new w.Vector3(0,0,0)})}),e.abrupt("return",i);case 21:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Z=5e-5;new w.Vector3(0*Z,24e6*Z,0*Z);function G(){var e=Object(a.useRef)(null),t=Object(a.useState)(!0),n=Object(f.a)(t,2),o=n[0],c=n[1],i=new w.Vector3(13771471*Z,7364470.4372*Z,-128971*Z);Object(p.f)(function(){c(document.getElementById("Safezone").checked)});return r.a.createElement(p.d,{ref:e,name:"SafeZone Trigger",segments:12,diameter:36e6*Z,position:i,setEnabled:o,computeWorldMatrix:!0,isPickable:!1},r.a.createElement("standardMaterial",{name:"SafeZone Trigger mat",alpha:"0.5",diffuseColor:new v.a(0,0,1),specularColor:new v.a(0,0,0)}))}function K(){var e=Object(a.useState)(null),t=Object(f.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(!1),i=Object(f.a)(c,2),s=i[0],l=i[1],u=Object(a.useRef)(!1),m=Object(p.g)();if(m&&!1===u.current){console.log("mount"),u.current=!0;var d=m.getEngine();m.debugLayer.show();d._gl,d.getRenderHeight(),d.getRenderingCanvas(),d.getRenderWidth()}return function(){var e=Object(a.useState)(0),t=Object(f.a)(e,2),n=t[0],r=t[1],o=["::pos{0,2,30.8601,53.3687,-0.0000}",[238425.1186,311031.5552,-125195.9156],"::pos{0,0,1412187.3672,360396.1875,666238.9646}","::pos{0,3,-2.5162,-123.9570,13569.2939}"];Object(p.f)(function(){var e=Object(g.a)(b.a.mark(function e(t){var a;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n){e.next=7;break}return r(n+1),e.next=4,Promise.all(o.map(function(e){return R(e,T)})).then(function(e){return e});case 4:a=e.sent,new y.MeshBuilder.CreateLines("path",{points:a},t),console.log("count");case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}(),Object(p.f)(function(){null===n&&!1===s&&B().then(function(e){o(e),l(!0)})}),s&&r.a.createElement(p.e,{name:"Helios"},r.a.createElement(P,{data:n}),r.a.createElement(G,null))}n(495),n(530);function U(){return r.a.createElement(p.c,{name:"Helios",ambientColor:new w.Color3(1,1,1),clearColor:new w.Color3.Black},r.a.createElement(p.a,{name:"camera1",target:w.Vector3.Zero(),alpha:Math.PI/3,beta:Math.PI/4,radius:8,minZ:1,maxZ:1e5,lowerRadiusLimit:10,wheelPrecision:.5}),r.a.createElement("hemisphericLight",{name:"light1",intensity:.7,direction:w.Vector3.Up()}),r.a.createElement(K,null))}var _=n(401),Q=n(314),Y=(n(531),n(532),function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,null,[{key:"String",value:function(e){var t=e.src.lang,n=Object.values(e.src)[0],a=Object.keys(e.src)[0],o=n[a.toLowerCase()];return r.a.createElement("li",{className:""},r.a.createElement("span",{className:"property-name"},a),r.a.createElement("span",{className:"c"},n.hasOwnProperty(a.toLowerCase())?o[t]:null))}},{key:"Boolean",value:function(e){e.src.lang;var t=Object.values(e.src)[0],n=Object.keys(e.src)[0],a=t[Object.keys(t).find(function(e){return e.match(n.replace(/ /g,""))})];return r.a.createElement("li",{className:"cr boolean"},r.a.createElement("div",null,r.a.createElement("span",{className:"property-name"},n),r.a.createElement("div",{className:"c"},r.a.createElement("span",{className:"c"},r.a.createElement("input",{type:"checkbox",checked:!!a,onChange:function(){return!1}})))))}},{key:"Folder",value:function(e){var t=Object(a.useState)(e.close),n=Object(f.a)(t,2),o=n[0],c=n[1];return r.a.createElement("li",{className:"folder "},r.a.createElement("div",{className:" title",onClick:function(t){t.target.innerText===e.title&&c(!o),void 0!==e.onChange&&e.onChange(o)}},r.a.createElement("ul",{className:o?"closed":null},r.a.createElement("li",{className:"title"},e.title),e.children)))}}]),t}(a.Component)),J=1;function X(e){var t=Object(a.useState)({main:null}),n=Object(f.a)(t,2),o=n[0],c=n[1],i=Object(a.useState)(null),s=Object(f.a)(i,2),l=s[0],u=s[1],m=Object(a.useState)(null),d=Object(f.a)(m,2),p=d[0],h=d[1],w=Object(a.useState)(1),v=Object(f.a)(w,2),y=v[0],E=v[1];function O(e,t){return Object.keys(e).find(function(n){return e[n]===t})}var j=Object(a.useContext)(x).id;function k(e){return[["Bauxite","Bauxite","Bauxit"],["Coal","Charbon","Kohle"],["Quartz","Quartz","Quarz"],["Hematite","H\xe9matite","H\xe4matit"]].find(function(t){return t[0]===e[0]})?"Tier 1":[["Natron","Natron","Soda"],["Chromite","Chromite","Chromit"],["Limestone","Calcaire","Kalkstein"],["Malachite","Malachite","Malachit"]].find(function(t){return t[0]===e[0]})?"Tier 2":[["Garnierite","Garni\xe9rite","Garnierit"],["Acanthite","Acanthite","Akanthit"],["Petalite","P\xe9talite","Petalit"],["Pyrite","Pyrite","Pyrit"]].find(function(t){return t[0]===e[0]})?"Tier 3":[["Cryolite","Cryolite","Kryolith"],["Cobaltite","Cobaltite","Cobaltit"],["Kolbeckite","Kolbeckite","Kolbeckit"],["Gold nuggets","P\xe9pites d'or","Goldnuggets"]].find(function(t){return t[0]===e[0]})?"Tier 4":[["Columbite","Columbite","Columbit"],["Vanadinite","Vanadinite","Vanadinit"],["Ilmenite","Ilm\xe9nite","Ilmenit"],["Rhodonite","Rhodonite","Rhodonit"]].find(function(t){return t[0]===e[0]})?"Tier 5":null}function C(){return(C=Object(g.a)(b.a.mark(function e(){var t;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("./data/image.json").then(function(e){return e.json()}).catch(function(e){return console.log(e)});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}Object(a.useEffect)(function(){B().then(function(e){u(Object.values(e))}),function(){return C.apply(this,arguments)}().then(function(e){h(e)}),l&&E(O(l,l.find(function(e){return e.id===x._currentValue.id})))},[j,y]);var S,I=Object(a.useState)(!0),V=Object(f.a)(I,2),M=V[0],N=V[1],P=Object(a.useState)(!0),D=Object(f.a)(P,2),F=D[0],T=D[1],A=Object(a.useState)({Safezone:!1,pipe:!1,orbit:!1}),R=Object(f.a)(A,2),z=R[0],L=R[1];return null!==l&&r.a.createElement("div",{className:"dg ac",onLoad:function(e){setInterval(function(){E(O(l,l.find(function(e){return e.id===x._currentValue.id})))},100)}},r.a.createElement("div",{className:"dg main a",id:"gui",style:{width:"245px",marginTop:"20px"}},r.a.createElement("div",{style:{width:"245px",marginLeft:"-3px",cursor:"ew-resize",position:"absolute",overflowX:"hidden",maxHeight:"90vh",paddingBottom:"28px"}},r.a.createElement("ul",{className:o.main},r.a.createElement(Y.Folder,{title:"Description",close:!0,onChange:function(e){N(!M)}},r.a.createElement("li",{className:"cr string",style:{height:M?0:"auto"}},r.a.createElement("h3",null,l[y].name[J]),r.a.createElement("img",{style:{width:"100%",height:"auto"},alt:"Planet",src:"https://"+(S=l[y].name[0],S.includes("Moon")?p&&p["generic moon"]:p&&p[S])}),r.a.createElement("span",{style:{display:"flex",height:"100%",width:"100%"}},l[y].description?l[y].description[J]:""))),r.a.createElement(Y.Folder,{title:"Info",close:!0},r.a.createElement(Y.String,{src:{Type:l[y],lang:J}}),r.a.createElement(Y.String,{src:{Classification:l[y],lang:J}}),r.a.createElement(Y.String,{src:{Biosphere:l[y],lang:J}}),r.a.createElement(Y.String,{src:{Habitability:l[y],lang:J}}),r.a.createElement(Y.Boolean,{src:{Atmosphere:l[y]}}),r.a.createElement(Y.Boolean,{src:{"In Safe Zone":l[y]}})),r.a.createElement(Y.Folder,{title:"Ores",close:!0,onChange:function(e){T(!F)}},r.a.createElement("li",{className:"cr",style:{height:F?0:"auto"}},l[y].ores.map(function(e){return r.a.createElement("div",{key:e[0],className:"cr"},r.a.createElement("span",{className:"property-name Ores "+(t=k(e),"T"+t[t.length-1])},k(e)),r.a.createElement("span",{className:" c"},e[J]));var t}).sort(function(e,t){return e.props.children[0].props.children<t.props.children[0].props.children?-1:e.props.children[0].props.children>t.props.children[0].props.children?1:0}))),r.a.createElement(Y.Folder,{title:"System",close:!0},r.a.createElement("li",{className:"cr boolean"},r.a.createElement("div",null,r.a.createElement("span",{className:"property-name"},"Toggle SafeZone"),r.a.createElement("div",{className:"c"},r.a.createElement("input",{id:"Safezone",type:"checkbox",checked:z.Safezone,onChange:function(){L(Object(Q.a)({},z,{Safezone:!z.Safezone}))}})))),r.a.createElement("li",{className:"cr boolean"},r.a.createElement("div",null,r.a.createElement("span",{className:"property-name"},"Toggle Pipe"),r.a.createElement("div",{className:"c"},r.a.createElement("input",{id:"pipe",type:"checkbox",checked:z.pipe,onChange:function(){L(Object(Q.a)({},z,{pipe:!z.pipe}))}})))),r.a.createElement("li",{className:"cr boolean"},r.a.createElement("div",null,r.a.createElement("span",{className:"property-name"},"Toggle Orbit"),r.a.createElement("div",{className:"c"},r.a.createElement("input",{id:"Orbit",type:"checkbox",checked:z.orbit,onChange:function(){L(Object(Q.a)({},z,{orbit:!z.orbit}))}})))))),r.a.createElement("div",{className:"close-button close-bottom",style:{width:"245px"},onClick:function(){var e;"closed"!==o[e="main"]?c(Object(Q.a)({},o,Object(_.a)({},e,"closed"))):c(Object(Q.a)({},o,Object(_.a)({},e,null)))}},null===o.main?"Close":"Open"))))}var $=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={width:0,height:0},n.updateWindowDimensions=n.updateWindowDimensions.bind(Object(d.a)(Object(d.a)(n))),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(p.b,{antialias:!0,width:this.state.width,height:this.state.height,adaptToDeviceRatio:!0,canvasId:"sample-canvas",debug:!0},r.a.createElement(U,null)),r.a.createElement(X,null))}}]),t}(a.Component);$.contextType=x;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[521,1,2]]]);
//# sourceMappingURL=main.bfa89a7b.chunk.js.map